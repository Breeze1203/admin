{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport ElementPlus, { ElMessage } from 'element-plus';\nimport 'element-plus/dist/index.css';\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue';\nimport menu_request from \"@/api/menu\";\nimport user_request from \"@/api/user\";\nconst app = createApp(App);\nrouter.beforeEach((to, from, next) => {\n  if (sessionStorage.getItem(\"user\") === null) {\n    ElMessage.error(\"尚未登录，请登录\");\n    next('/');\n  } else if (store.state.menu.length === 0) {\n    menu_request.getMenusByRole(JSON.parse(sessionStorage.getItem(\"user\")).role.id).then(resp => {\n      store.commit(\"initMenu\", resp.data);\n    });\n  } else if (store.state.user === null) {\n    user_request.getUserDetailsById(JSON.parse(sessionStorage.getItem(\"user\")).id).then(resp => {\n      if (resp.data) {\n        console.log(resp.data);\n        store.commit(\"getUser\", resp.data);\n      }\n    });\n  }\n  next();\n});\napp.use(store).use(router).use(ElementPlus).mount('#app');\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\n  app.component(key, component);\n}","map":{"version":3,"names":["createApp","App","router","store","ElementPlus","ElMessage","ElementPlusIconsVue","menu_request","user_request","app","beforeEach","to","from","next","sessionStorage","getItem","error","state","menu","length","getMenusByRole","JSON","parse","role","id","then","resp","commit","data","user","getUserDetailsById","console","log","use","mount","key","component","Object","entries"],"sources":["/Users/pt/Documents/code/adminflowui/src/main.js"],"sourcesContent":["import {createApp} from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport ElementPlus, {ElMessage} from 'element-plus'\nimport 'element-plus/dist/index.css'\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue'\nimport menu_request from \"@/api/menu\";\nimport user_request from \"@/api/user\";\n\nconst app = createApp(App)\n\nrouter.beforeEach((to,from,next)=>{\n    if(sessionStorage.getItem(\"user\")===null){\n        ElMessage.error(\"尚未登录，请登录\");\n        next('/');\n    }else if(store.state.menu.length===0){\n        menu_request.getMenusByRole(JSON.parse(sessionStorage.getItem(\"user\")).role.id).then(resp => {\n            store.commit(\"initMenu\", resp.data);\n        });\n    }else if(store.state.user===null){\n        user_request.getUserDetailsById(JSON.parse(sessionStorage.getItem(\"user\")).id).then(resp=>{\n            if(resp.data){\n                console.log(resp.data);\n                store.commit(\"getUser\",resp.data);\n            }\n        })\n    }\n    next();\n})\n\n\napp.use(store).use(router).use(ElementPlus).mount('#app')\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\n    app.component(key, component)\n}\n"],"mappings":"AAAA,SAAQA,SAAS,QAAO,KAAK;AAC7B,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,WAAW,IAAGC,SAAS,QAAO,cAAc;AACnD,OAAO,6BAA6B;AACpC,OAAO,KAAKC,mBAAmB,MAAM,yBAAyB;AAC9D,OAAOC,YAAY,MAAM,YAAY;AACrC,OAAOC,YAAY,MAAM,YAAY;AAErC,MAAMC,GAAG,GAAGT,SAAS,CAACC,GAAG,CAAC;AAE1BC,MAAM,CAACQ,UAAU,CAAC,CAACC,EAAE,EAACC,IAAI,EAACC,IAAI,KAAG;EAC9B,IAAGC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,KAAG,IAAI,EAAC;IACrCV,SAAS,CAACW,KAAK,CAAC,UAAU,CAAC;IAC3BH,IAAI,CAAC,GAAG,CAAC;EACb,CAAC,MAAK,IAAGV,KAAK,CAACc,KAAK,CAACC,IAAI,CAACC,MAAM,KAAG,CAAC,EAAC;IACjCZ,YAAY,CAACa,cAAc,CAACC,IAAI,CAACC,KAAK,CAACR,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACQ,IAAI,CAACC,EAAE,CAAC,CAACC,IAAI,CAACC,IAAI,IAAI;MACzFvB,KAAK,CAACwB,MAAM,CAAC,UAAU,EAAED,IAAI,CAACE,IAAI,CAAC;IACvC,CAAC,CAAC;EACN,CAAC,MAAK,IAAGzB,KAAK,CAACc,KAAK,CAACY,IAAI,KAAG,IAAI,EAAC;IAC7BrB,YAAY,CAACsB,kBAAkB,CAACT,IAAI,CAACC,KAAK,CAACR,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACS,EAAE,CAAC,CAACC,IAAI,CAACC,IAAI,IAAE;MACtF,IAAGA,IAAI,CAACE,IAAI,EAAC;QACTG,OAAO,CAACC,GAAG,CAACN,IAAI,CAACE,IAAI,CAAC;QACtBzB,KAAK,CAACwB,MAAM,CAAC,SAAS,EAACD,IAAI,CAACE,IAAI,CAAC;MACrC;IACJ,CAAC,CAAC;EACN;EACAf,IAAI,CAAC,CAAC;AACV,CAAC,CAAC;AAGFJ,GAAG,CAACwB,GAAG,CAAC9B,KAAK,CAAC,CAAC8B,GAAG,CAAC/B,MAAM,CAAC,CAAC+B,GAAG,CAAC7B,WAAW,CAAC,CAAC8B,KAAK,CAAC,MAAM,CAAC;AACzD,KAAK,MAAM,CAACC,GAAG,EAAEC,SAAS,CAAC,IAAIC,MAAM,CAACC,OAAO,CAAChC,mBAAmB,CAAC,EAAE;EAChEG,GAAG,CAAC2B,SAAS,CAACD,GAAG,EAAEC,SAAS,CAAC;AACjC"},"metadata":{},"sourceType":"module","externalDependencies":[]}