{"ast":null,"code":"import requestUtil from \"@/util/requestUtil\";\nimport permissions_request from \"@/api/permissions\";\nimport menu_request from \"@/api/menu\";\nexport default {\n  name: 'Permission',\n  data() {\n    return {\n      roles: [],\n      accordion: null,\n      operation: [],\n      total: null,\n      // 操作权限总条数,\n      page: 1,\n      size: 3,\n      menusByRole: [1, 2, 3],\n      menuData: []\n    };\n  },\n  methods: {\n    // 初始化所有菜单\n    initMenu() {\n      menu_request.getAllMenus().then(resp => {\n        this.menuData = resp.data;\n      });\n    },\n    // 初始化所有角色\n    initRole() {\n      requestUtil.getAllRoles().then(resp => {\n        this.roles = resp.data;\n        console.log(resp.data);\n      });\n    },\n    // 初始化用户所有操作权限\n    initPermissions() {\n      console.log(this.size);\n      permissions_request.getAllPermByPage(this.page, this.size).then(resp => {\n        this.operation = resp.data;\n      });\n    },\n    // 初始化操作权限条数\n    initCount() {\n      permissions_request.getPermissionCount().then(resp => {\n        this.total = resp.data;\n      });\n    },\n    handleSizeChange(size) {\n      this.size = size;\n      this.initPermissions();\n    },\n    handleCurrentChange(page) {\n      this.page = page;\n      this.initPermissions();\n    }\n  },\n  mounted() {\n    this.initRole();\n    this.initPermissions();\n    this.initCount();\n    this.initMenu();\n  }\n};","map":{"version":3,"names":["requestUtil","permissions_request","menu_request","name","data","roles","accordion","operation","total","page","size","menusByRole","menuData","methods","initMenu","getAllMenus","then","resp","initRole","getAllRoles","console","log","initPermissions","getAllPermByPage","initCount","getPermissionCount","handleSizeChange","handleCurrentChange","mounted"],"sources":["/Users/pt/Documents/code/adminflowui/src/components/set/Permission.vue"],"sourcesContent":["<template>\n  <div style=\"margin-top: 30px;width: 100%\">\n    <el-row :gutter=\"6\" style=\"margin-bottom: 30px\">\n      <el-col :xs=\"4\" :sm=\"6\" :md=\"4\" :lg=\"3\" :xl=\"1\">\n        <label>用户菜单权限</label>\n      </el-col>\n      <el-col :xs=\"4\" :sm=\"6\" :md=\"4\" :lg=\"3\" :xl=\"1\">\n        <el-button plain icon=\"Refresh\" @click=\"initPermissions\">刷新</el-button>\n      </el-col>\n    </el-row>\n    <el-collapse v-for=\"(role,index) in roles\" accordion v-model=\"accordion\">\n      <el-collapse-item style=\"font-size: larger;\" :title=\"role.nameZh\" :name=\"role.id\">\n          <div>\n            <el-tree show-checkbox node-key=\"id\"\n                     :default-checked-keys=\"this.menusByRole\" :data=\"this.menuData\"\n            />\n          </div>\n          <div class=\"button-group\">\n            <el-button class=\"button\" plain>取消修改</el-button>\n            <el-button class=\"button\" plain type=\"danger\">确认修改</el-button>\n          </div>\n      </el-collapse-item>\n    </el-collapse>\n  </div>\n  <div style=\"margin-top: 10px\">\n    <el-row :gutter=\"6\" style=\"margin-bottom: 30px\">\n      <el-col :xs=\"4\" :sm=\"6\" :md=\"4\" :lg=\"3\" :xl=\"1\">\n        <label>用户操作权限</label>\n      </el-col>\n      <el-col :xs=\"4\" :sm=\"6\" :md=\"4\" :lg=\"3\" :xl=\"1\">\n        <el-button plain icon=\"Refresh\" @click=\"initPermissions\">刷新</el-button>\n      </el-col>\n      <el-col :xs=\"2\" :sm=\"3\" :md=\"5\" :lg=\"5\" :xl=\"7\">\n        <el-button plain type=\"success\" icon=\"Upload\">导出</el-button>\n      </el-col>\n    </el-row>\n    <el-table\n        :data=\"operation\"\n        style=\"width: 100%;\"\n        row-key=\"menu_id\"\n        border\n        :default-expand-all=\"false\">\n      <el-table-column align=\"center\" prop=\"id\" label=\"唯一标识\"></el-table-column>\n      <el-table-column align=\"center\" prop=\"name\" label=\"权限标识\"></el-table-column>\n      <el-table-column align=\"center\" prop=\"describe\" label=\"操作权限描述\"></el-table-column>\n    </el-table>\n    <el-pagination style=\"margin-top: 10px\"\n                   :page-sizes=\"[3, 6, 9]\"\n                   layout=\"total, sizes, prev, pager, next, jumper\"\n                   :total=total\n                   background\n                   :default-page-size=\"3\"\n                   @size-change=\"handleSizeChange\"\n                   @current-change=\"handleCurrentChange\"\n    />\n  </div>\n</template>\n<script>\nimport requestUtil from \"@/util/requestUtil\";\nimport permissions_request from \"@/api/permissions\";\nimport menu_request from \"@/api/menu\";\n\nexport default {\n  name: 'Permission',\n  data() {\n    return {\n      roles: [],\n      accordion: null,\n      operation: [],\n      total: null,// 操作权限总条数,\n      page: 1,\n      size: 3,\n      menusByRole:[1,2,3],\n      menuData:[]\n    }\n  },\n  methods: {\n    // 初始化所有菜单\n    initMenu(){\n      menu_request.getAllMenus().then(resp=>{\n        this.menuData=resp.data;\n      })\n    },\n    // 初始化所有角色\n    initRole() {\n      requestUtil.getAllRoles().then(resp => {\n        this.roles = resp.data;\n        console.log(resp.data);\n      })\n    },\n    // 初始化用户所有操作权限\n    initPermissions() {\n      console.log(this.size);\n      permissions_request.getAllPermByPage(this.page, this.size).then(resp => {\n        this.operation = resp.data;\n      })\n    },\n    // 初始化操作权限条数\n    initCount() {\n      permissions_request.getPermissionCount().then(resp => {\n        this.total = resp.data;\n      })\n    },\n    handleSizeChange(size){\n      this.size=size;\n      this.initPermissions();\n    },\n    handleCurrentChange(page){\n      this.page=page;\n      this.initPermissions();\n    }\n  },\n  mounted() {\n    this.initRole();\n    this.initPermissions();\n    this.initCount();\n    this.initMenu();\n  }\n}\n</script>\n<style scoped>\n.collapse {\n  margin-top: 30px;\n}\n</style>\n"],"mappings":"AA0DA,OAAOA,WAAU,MAAO,oBAAoB;AAC5C,OAAOC,mBAAkB,MAAO,mBAAmB;AACnD,OAAOC,YAAW,MAAO,YAAY;AAErC,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,SAAS,EAAE,IAAI;MACfC,SAAS,EAAE,EAAE;MACbC,KAAK,EAAE,IAAI;MAAC;MACZC,IAAI,EAAE,CAAC;MACPC,IAAI,EAAE,CAAC;MACPC,WAAW,EAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC;MACnBC,QAAQ,EAAC;IACX;EACF,CAAC;EACDC,OAAO,EAAE;IACP;IACAC,QAAQA,CAAA,EAAE;MACRZ,YAAY,CAACa,WAAW,CAAC,CAAC,CAACC,IAAI,CAACC,IAAI,IAAE;QACpC,IAAI,CAACL,QAAQ,GAACK,IAAI,CAACb,IAAI;MACzB,CAAC;IACH,CAAC;IACD;IACAc,QAAQA,CAAA,EAAG;MACTlB,WAAW,CAACmB,WAAW,CAAC,CAAC,CAACH,IAAI,CAACC,IAAG,IAAK;QACrC,IAAI,CAACZ,KAAI,GAAIY,IAAI,CAACb,IAAI;QACtBgB,OAAO,CAACC,GAAG,CAACJ,IAAI,CAACb,IAAI,CAAC;MACxB,CAAC;IACH,CAAC;IACD;IACAkB,eAAeA,CAAA,EAAG;MAChBF,OAAO,CAACC,GAAG,CAAC,IAAI,CAACX,IAAI,CAAC;MACtBT,mBAAmB,CAACsB,gBAAgB,CAAC,IAAI,CAACd,IAAI,EAAE,IAAI,CAACC,IAAI,CAAC,CAACM,IAAI,CAACC,IAAG,IAAK;QACtE,IAAI,CAACV,SAAQ,GAAIU,IAAI,CAACb,IAAI;MAC5B,CAAC;IACH,CAAC;IACD;IACAoB,SAASA,CAAA,EAAG;MACVvB,mBAAmB,CAACwB,kBAAkB,CAAC,CAAC,CAACT,IAAI,CAACC,IAAG,IAAK;QACpD,IAAI,CAACT,KAAI,GAAIS,IAAI,CAACb,IAAI;MACxB,CAAC;IACH,CAAC;IACDsB,gBAAgBA,CAAChB,IAAI,EAAC;MACpB,IAAI,CAACA,IAAI,GAACA,IAAI;MACd,IAAI,CAACY,eAAe,CAAC,CAAC;IACxB,CAAC;IACDK,mBAAmBA,CAAClB,IAAI,EAAC;MACvB,IAAI,CAACA,IAAI,GAACA,IAAI;MACd,IAAI,CAACa,eAAe,CAAC,CAAC;IACxB;EACF,CAAC;EACDM,OAAOA,CAAA,EAAG;IACR,IAAI,CAACV,QAAQ,CAAC,CAAC;IACf,IAAI,CAACI,eAAe,CAAC,CAAC;IACtB,IAAI,CAACE,SAAS,CAAC,CAAC;IAChB,IAAI,CAACV,QAAQ,CAAC,CAAC;EACjB;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}