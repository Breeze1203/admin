{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-b913f7da\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  style: {\n    \"margin-top\": \"25px\",\n    \"width\": \"100%\"\n  }\n};\nconst _hoisted_2 = {\n  style: {\n    \"width\": \"100%\",\n    \"margin-top\": \"30px\"\n  }\n};\nconst _hoisted_3 = {\n  style: {\n    \"margin-top\": \"3%\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"department\"\n};\nconst _hoisted_5 = {\n  class: \"buttons\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_Plus = _resolveComponent(\"Plus\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_Refresh = _resolveComponent(\"Refresh\");\n  const _component_el_tree = _resolveComponent(\"el-tree\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", null, [_createVNode(_component_el_input, {\n    modelValue: $data.organization.name,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.organization.name = $event),\n    placeholder: \"请输入部门名称\",\n    style: {\n      \"width\": \"200px\",\n      \"margin-left\": \"20px\"\n    },\n    type: \"text\"\n  }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_select, {\n    modelValue: $data.organization.parentId,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.organization.parentId = $event),\n    clearable: \"\",\n    placeholder: \"请选择所属部门\",\n    size: \"default\",\n    style: {\n      \"margin-left\": \"30px\"\n    }\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.options, item => {\n      return _openBlock(), _createBlock(_component_el_option, {\n        key: item.id,\n        label: item.name,\n        value: item.id\n      }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n    plain: \"\",\n    style: {\n      \"margin-left\": \"30px\"\n    },\n    type: \"primary\",\n    onClick: $options.addOrganization\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"添加组织 \"), _createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode(_component_Plus)]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n    plain: \"\",\n    style: {\n      \"margin-left\": \"30px\"\n    },\n    type: \"info\",\n    onClick: $options.initTreeOrganization\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"重置 \"), _createVNode(_component_el_icon, null, {\n      default: _withCtx(() => [_createVNode(_component_Refresh)]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])])])]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_tree, {\n    data: $data.data,\n    \"default-expand-all\": true,\n    props: $data.defaultProps,\n    \"auto-expand-parent\": \"\",\n    class: \"custom-tree\",\n    \"node-key\": \"id\",\n    style: {\n      \"width\": \"90%\",\n      \"font-style\": \"italic\"\n    }\n  }, {\n    default: _withCtx(({\n      node,\n      data\n    }) => [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"span\", null, _toDisplayString(node.label), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_5, [_createVNode(_component_el_button, {\n      size: \"small\",\n      type: \"danger\",\n      onClick: $event => $options.deleteOrganization(data)\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"删除部门\")]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\", \"props\"]), _createVNode(_component_el_table, {\n    data: $data.data,\n    style: {\n      \"width\": \"90%\",\n      \"margin-bottom\": \"20px\",\n      \"margin-top\": \"3%\"\n    },\n    \"row-key\": \"id\",\n    \"default-expand-all\": false,\n    \"tree-props\": {\n      children: 'children'\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      align: \"center\",\n      prop: \"id\",\n      label: \"唯一标识\"\n    }), _createVNode(_component_el_table_column, {\n      align: \"center\",\n      prop: \"name\",\n      label: \"部门名称\"\n    }), _createVNode(_component_el_table_column, {\n      align: \"center\",\n      prop: \"parentId\",\n      label: \"所属父部门\"\n    }), _createVNode(_component_el_table_column, {\n      align: \"center\",\n      fixed: \"right\",\n      label: \"操作\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        plain: \"\",\n        type: \"text\",\n        icon: \"Edit\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"修改\")]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["style","class","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_el_input","$data","organization","name","$event","placeholder","type","_component_el_select","parentId","clearable","size","_createElementBlock","_Fragment","_renderList","options","item","_createBlock","_component_el_option","key","id","label","value","_component_el_button","plain","onClick","$options","addOrganization","_component_el_icon","_component_Plus","initTreeOrganization","_component_Refresh","_hoisted_3","_component_el_tree","data","props","defaultProps","default","_withCtx","node","_hoisted_4","_toDisplayString","_hoisted_5","deleteOrganization","_component_el_table","children","_component_el_table_column","align","prop","fixed","icon"],"sources":["/Users/pt/Documents/code/adminflowui/src/components/info/Department.vue"],"sourcesContent":["<template>\n  <div style=\"margin-top: 25px;width: 100%\">\n    <div style=\"width: 100%;margin-top:30px;\">\n      <div>\n        <el-input v-model=\"organization.name\" placeholder=\"请输入部门名称\" style=\"width: 200px;margin-left: 20px\"\n                  type=\"text\">\n        </el-input>\n        <el-select v-model=\"organization.parentId\" clearable placeholder=\"请选择所属部门\" size=\"default\"\n                   style=\"margin-left: 30px\">\n          <el-option\n              v-for=\"item in options\"\n              :key=\"item.id\"\n              :label=\"item.name\"\n              :value=\"item.id\"\n          />\n        </el-select>\n        <el-button plain style=\"margin-left: 30px\" type=\"primary\" @click=\"addOrganization\">添加组织\n          <el-icon>\n            <Plus/>\n          </el-icon>\n        </el-button>\n        <el-button plain style=\"margin-left: 30px\" type=\"info\" @click=\"initTreeOrganization\">重置\n          <el-icon>\n            <Refresh/>\n          </el-icon>\n        </el-button>\n      </div>\n    </div>\n  </div>\n  <div style=\"margin-top: 3%\">\n    <el-tree :data=\"data\"\n             :default-expand-all=\"true\"\n             :props=\"defaultProps\"\n             auto-expand-parent\n             class=\"custom-tree\"\n             node-key=\"id\"\n             style=\"width: 90%;font-style: italic\">\n      <template #default=\"{ node, data }\">\n        <div class=\"department\">\n          <span>{{ node.label }}</span>\n          <span class=\"buttons\">\n            <el-button size=\"small\" type=\"danger\" @click=\"deleteOrganization(data)\">删除部门</el-button>\n          </span>\n        </div>\n      </template>\n    </el-tree>\n    <el-table\n        :data=\"data\"\n        style=\"width: 90%;margin-bottom: 20px;margin-top: 3%\"\n        row-key=\"id\"\n        :default-expand-all=\"false\"\n        :tree-props=\"{children: 'children'}\">\n      <el-table-column align=\"center\" prop=\"id\" label=\"唯一标识\"></el-table-column>\n      <el-table-column align=\"center\" prop=\"name\" label=\"部门名称\"></el-table-column>\n      <el-table-column align=\"center\" prop=\"parentId\" label=\"所属父部门\"></el-table-column>\n      <el-table-column align=\"center\" fixed=\"right\" label=\"操作\">\n        <template #default>\n          <el-button plain type=\"text\" icon=\"Edit\">修改</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport organization_request from \"@/api/organization\";\nimport {ElMessage, ElMessageBox} from \"element-plus\";\n\nexport default {\n  name: \"Department\",\n  data() {\n    return {\n      data: [],\n      organization: {\n        id: null,\n        name: null,\n        parentId: null,\n      },\n      defaultProps: {\n        children: 'children',\n        label: 'name'\n      },\n      options: []\n    }\n  },\n  methods: {\n    // 初始化树形组织\n    initTreeOrganization() {\n      organization_request.getTreeOrganization().then(resp => {\n        this.data = resp.data;\n      })\n    },\n    // 初始化所有组织\n    initAllOrganization() {\n      organization_request.getAllOrganization().then(resp => {\n        console.log(resp.data);\n        this.options = resp.data;\n      })\n    },\n    // 添加组织\n    addOrganization() {\n      if (this.organization.name === null) {\n        ElMessage.error(\"请输入要添加的部门名称\");\n        return;\n      }\n      if (this.organization.parentId === null) {\n        ElMessage.error(\" 请选择父部门\");\n        return;\n      }\n      organization_request.addOrganization(this.organization).then(resp => {\n        if (resp.data.code === 200) {\n          ElMessage.success(resp.data.message);\n          this.initTreeOrganization();\n          this.initAllOrganization();\n        } else {\n          ElMessage.error(resp.data.message);\n        }\n      })\n    },\n    // 删除组织\n    deleteOrganization(data) {\n      ElMessageBox.confirm(\n          '此操作将删除【' + data.name + '】部门，是否继续?',\n          'Warning',\n          {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning',\n          }\n      )\n          .then(() => {\n            organization_request.deleteOrganization(data.id).then(resp => {\n              if (resp.data.code === 200) {\n                ElMessage.success(resp.data.message);\n                this.initTreeOrganization();\n                this.initAllOrganization();\n              } else {\n                ElMessage.error(resp.data.message);\n              }\n            })\n          })\n          .catch(() => {\n            ElMessage({\n              type: 'info',\n              message: '取消操作',\n            })\n          })\n    }\n  },\n  mounted() {\n    this.initTreeOrganization();\n    this.initAllOrganization();\n  }\n}\n</script>\n\n<style scoped>\n.department {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n}\n\n.custom-tree {\n  color: #666666;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}