{"ast":null,"code":"import request from \"@/util/requestUtil\";\nimport { ElMessage } from \"element-plus\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: 'LogSet',\n  data() {\n    return {\n      LogData: null,\n      total: null,\n      keyword: '',\n      offset: 1,\n      pageSize: 10,\n      options: [{\n        value: '用户登录',\n        label: '用户登录'\n      }, {\n        value: '退出登录',\n        label: '退出登录'\n      }, {\n        value: '添加组织',\n        label: '添加组织'\n      }, {\n        value: '删除组织',\n        label: '删除组织'\n      }, {\n        value: '添加用户',\n        label: '添加用户'\n      }, {\n        value: '删除用户',\n        label: '删除用户'\n      }, {\n        value: '添加角色',\n        label: '添加角色'\n      }, {\n        value: '删除角色',\n        label: '删除角色'\n      }, {\n        value: '修改权限',\n        label: '修改权限'\n      }, {\n        value: '修改菜单',\n        label: '修改菜单'\n      }]\n    };\n  },\n  computed: {\n    ...mapState(['permissions_data'])\n  },\n  methods: {\n    // 初始化日期数据\n    initLogData(keyword, offset, pageSize) {\n      request.initLogData(keyword, offset, pageSize).then(resp => {\n        if (resp) {\n          this.LogData = resp.data.operationData;\n          this.total = resp.data.total;\n        }\n      });\n    },\n    // 每页展示条数改变\n    handleSizeChange(size) {\n      this.initLogData(this.keyword, this.offset, size);\n    },\n    handleCurrentChange(offset) {\n      this.initLogData(this.keyword, offset, this.pageSize);\n    },\n    // 清空日志\n    deleteLog() {\n      request.deleteLog().then(resp => {\n        if (resp.data.code === 200) {\n          ElMessage.success(resp.data.message);\n          this.initLogData(this.keyword, this.offset, this.pageSize);\n        } else {\n          ElMessage.error(resp.data.message);\n        }\n      });\n    }\n  },\n  mounted() {\n    this.initLogData(this.keyword, this.offset, this.pageSize);\n  },\n  watch: {\n    keyword(newValue, oldValue) {\n      this.initLogData(newValue, this.offset, this.pageSize);\n    }\n  }\n};","map":{"version":3,"names":["request","ElMessage","mapState","name","data","LogData","total","keyword","offset","pageSize","options","value","label","computed","methods","initLogData","then","resp","operationData","handleSizeChange","size","handleCurrentChange","deleteLog","code","success","message","error","mounted","watch","newValue","oldValue"],"sources":["/Users/pt/Documents/code/adminflowui/src/components/log/LogSet.vue"],"sourcesContent":["<template>\n  <div class=\"Log-shadow\">\n    <div>\n      <el-row :gutter=\"5\">\n        <el-col :span=\"8\">\n          <el-select\n              v-model=\"keyword\"\n              :clearable=\"true\"\n              placeholder=\"操作类型\"\n              style=\"width: 240px\"\n          >\n            <el-option\n                v-for=\"item in options\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n            />\n          </el-select>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-button type=\"primary\" @click=\"initLogData(this.keyword,this.offset,this.pageSize)\">刷新日志</el-button>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-button :disabled=\"!permissions_data.includes('delete_log')\" type=\"danger\" @click=\"deleteLog\">清空日志</el-button>\n        </el-col>\n      </el-row>\n    </div>\n    <div style=\"margin-top: 20px\">\n      <el-table :data=\"LogData\" style=\"width: 90%\" border>\n        <el-table-column prop=\"id\" label=\"id\" align=\"center\" width=\"100\"/>\n        <el-table-column prop=\"user\" label=\"用户名\" align=\"center\" width=\"100\"/>\n        <el-table-column prop=\"type\" label=\"操作类型\" align=\"center\" width=\"200\"/>\n        <el-table-column prop=\"operation\" label=\"说明\" align=\"center\" width=\"250\"/>\n        <el-table-column prop=\"date\" label=\"操作时间\" align=\"center\" width=\"250\"/>\n      </el-table>\n    </div>\n    <div style=\"margin-top: 20px\">\n      <el-pagination\n          :page-sizes=\"[10, 20, 30, 40]\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=total\n          background\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nimport request from \"@/util/requestUtil\";\nimport {ElMessage} from \"element-plus\";\nimport {mapState} from \"vuex\";\n\nexport default {\n  name: 'LogSet',\n  data() {\n    return {\n      LogData: null,\n      total: null,\n      keyword: '',\n      offset: 1,\n      pageSize: 10,\n      options: [\n        {\n          value: '用户登录',\n          label: '用户登录',\n        },\n        {\n          value: '退出登录',\n          label: '退出登录',\n        },\n        {\n          value: '添加组织',\n          label: '添加组织',\n        },\n        {\n          value: '删除组织',\n          label: '删除组织',\n        },\n        {\n          value: '添加用户',\n          label: '添加用户',\n        },\n        {\n          value: '删除用户',\n          label: '删除用户',\n        },{\n          value: '添加角色',\n          label: '添加角色',\n        },\n        {\n          value: '删除角色',\n          label: '删除角色',\n        },\n        {\n          value: '修改权限',\n          label: '修改权限',\n        },\n        {\n          value: '修改菜单',\n          label: '修改菜单',\n        }\n      ]\n    }\n  },\n  computed:{\n    ...mapState(['permissions_data'])\n  },\n  methods: {\n    // 初始化日期数据\n    initLogData(keyword, offset, pageSize) {\n      request.initLogData(keyword, offset, pageSize).then(resp => {\n        if (resp) {\n          this.LogData = resp.data.operationData;\n          this.total = resp.data.total;\n        }\n      })\n    },\n    // 每页展示条数改变\n    handleSizeChange(size) {\n      this.initLogData(this.keyword, this.offset, size);\n    },\n    handleCurrentChange(offset) {\n      this.initLogData(this.keyword, offset, this.pageSize);\n    },\n    // 清空日志\n    deleteLog() {\n      request.deleteLog().then(resp => {\n        if (resp.data.code === 200) {\n          ElMessage.success(resp.data.message);\n          this.initLogData(this.keyword, this.offset, this.pageSize);\n        } else {\n          ElMessage.error(resp.data.message)\n        }\n      })\n    }\n  },\n  mounted() {\n    this.initLogData(this.keyword, this.offset, this.pageSize);\n  },\n  watch: {\n    keyword(newValue, oldValue) {\n      this.initLogData(newValue, this.offset, this.pageSize);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.Log-shadow {\n  margin-top: 25px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4); /* 设置阴影效果 */\n  border: 1px solid #ccc; /* 设置边框 */\n  padding: 20px; /* 设置内边距，可根据需要进行调整 */\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}