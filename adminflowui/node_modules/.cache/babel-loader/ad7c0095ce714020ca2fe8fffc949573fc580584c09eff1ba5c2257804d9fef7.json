{"ast":null,"code":"import { createRouter, createWebHashHistory } from 'vue-router';\nimport Login from \"@/components/Login.vue\";\nimport Home from \"@/components/Home.vue\";\nimport LogSet from \"@/components/log/LogSet.vue\";\nimport UserSet from \"@/components/set/UserSet.vue\";\nimport RoleSet from \"@/components/set/RoleSet.vue\";\nimport Permission from \"@/components/set/Permission.vue\";\nimport About from \"@/components/pub/About.vue\";\nimport MenuSet from \"@/components/set/MenuSet.vue\";\nimport Department from \"@/components/info/Department.vue\";\nimport Position from \"@/components/info/Position.vue\";\nimport { ElMessage } from \"element-plus\";\nimport store from \"@/store\";\nimport user_request from \"@/api/user\";\nconst routes = [{\n  path: '/',\n  name: 'Login',\n  component: Login\n}, {\n  path: '/home',\n  name: 'Home',\n  component: Home,\n  children: [{\n    path: '/log',\n    name: '操作日志',\n    component: LogSet\n  }, {\n    path: '/system/user',\n    name: '用户管理',\n    component: UserSet\n  }, {\n    path: '/system/role',\n    name: '角色管理',\n    component: RoleSet\n  }, {\n    path: '/system/permissions',\n    name: '权限管理',\n    component: Permission\n  }, {\n    path: '/system/menus',\n    name: '菜单管理',\n    component: MenuSet\n  }, {\n    path: '/system/department',\n    name: '部门管理',\n    component: Department\n  }, {\n    path: '/system/position',\n    name: '职位管理',\n    component: Position\n  }, {\n    path: '/system/operation',\n    name: '操作日志记录',\n    component: LogSet\n  }, {\n    path: '/system/scheduled',\n    name: '定时任务',\n    component: LogSet\n  }, {\n    path: '/about',\n    name: '关于项目',\n    component: About\n  }]\n}];\nconst router = createRouter({\n  history: createWebHashHistory(process.env.BASE_URL),\n  routes\n});\n\n/*\n路由导航守卫\n */\nrouter.beforeEach((to, from, next) => {\n  if (to.name !== 'Login' && sessionStorage.getItem(\"user\") === null) {\n    ElMessage.info(\"尚未登录，请登录\");\n    next({\n      name: 'Login'\n    });\n  } else {\n    console.log(store.state.user = null);\n    if (store.state.user === null) {\n      user_request.getUserDetailsById(JSON.parse(sessionStorage.getItem(\"user\")).id).then(resp => {\n        console.log(resp.data);\n        store.commit(\"getUser\", resp.data);\n      });\n    }\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHashHistory","Login","Home","LogSet","UserSet","RoleSet","Permission","About","MenuSet","Department","Position","ElMessage","store","user_request","routes","path","name","component","children","router","history","process","env","BASE_URL","beforeEach","to","from","next","sessionStorage","getItem","info","console","log","state","user","getUserDetailsById","JSON","parse","id","then","resp","data","commit"],"sources":["/Users/pt/Documents/code/adminflowui/src/router/index.js"],"sourcesContent":["import {createRouter, createWebHashHistory} from 'vue-router'\nimport Login from \"@/components/Login.vue\";\nimport Home from \"@/components/Home.vue\";\nimport LogSet from \"@/components/log/LogSet.vue\";\nimport UserSet from \"@/components/set/UserSet.vue\";\nimport RoleSet from \"@/components/set/RoleSet.vue\";\nimport Permission from \"@/components/set/Permission.vue\";\nimport About from \"@/components/pub/About.vue\";\nimport MenuSet from \"@/components/set/MenuSet.vue\";\nimport Department from \"@/components/info/Department.vue\";\nimport Position from \"@/components/info/Position.vue\";\nimport {ElMessage} from \"element-plus\";\nimport store from \"@/store\";\nimport user_request from \"@/api/user\";\n\nconst routes = [\n    {\n        path: '/',\n        name: 'Login',\n        component: Login\n    },\n    {\n        path: '/home',\n        name: 'Home',\n        component: Home,\n        children: [\n            {\n                path: '/log',\n                name: '操作日志',\n                component: LogSet\n            },\n            {\n                path: '/system/user',\n                name: '用户管理',\n                component: UserSet\n            },\n            {\n                path: '/system/role',\n                name: '角色管理',\n                component: RoleSet\n            },\n            {\n                path: '/system/permissions',\n                name: '权限管理',\n                component: Permission\n            },\n            {\n                path: '/system/menus',\n                name: '菜单管理',\n                component: MenuSet\n            },\n            {\n                path: '/system/department',\n                name: '部门管理',\n                component: Department\n            },\n            {\n                path: '/system/position',\n                name: '职位管理',\n                component: Position\n            },\n            {\n                path: '/system/operation',\n                name: '操作日志记录',\n                component: LogSet\n            },\n            {\n                path: '/system/scheduled',\n                name: '定时任务',\n                component: LogSet\n            },\n            {\n                path: '/about',\n                name: '关于项目',\n                component: About\n            },\n        ]\n    },\n\n]\n\nconst router = createRouter({\n    history: createWebHashHistory(process.env.BASE_URL),\n    routes\n})\n\n/*\n路由导航守卫\n */\nrouter.beforeEach((to, from, next) => {\n    if (to.name !== 'Login' && sessionStorage.getItem(\"user\") === null) {\n        ElMessage.info(\"尚未登录，请登录\");\n        next({name: 'Login'})\n    } else {\n        console.log(store.state.user=null);\n        if(store.state.user===null){\n            user_request.getUserDetailsById(JSON.parse(sessionStorage.getItem(\"user\")).id).then(resp=>{\n                console.log(resp.data);\n                store.commit(\"getUser\",resp.data)\n            })\n        }\n        next()\n    }\n})\n\nexport default router\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}